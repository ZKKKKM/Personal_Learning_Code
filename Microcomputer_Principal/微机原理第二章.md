## 8088 引脚图
![[8088_引脚图.png]]
我们可以将8088的引脚分成不同的核心：
1. 总线组：数据和地址的分时复用
	**AD7 ~ AD0 (Pin 9-16):** **低 8 位地址/数据总线**
		ALE等于1的时候，引脚传递的就是地址信号，当$\overline{DEN}$等于0的时候，引脚传递的就是数据信号
	**A15 ~ A8 (Pin 2-8, 39):** **高位地址总线**。
	**A19/S6 ~ A16/S3 (Pin 35-38):** **最高位地址/状态总线**。
		![[段寄存器状态线.png]]在这些状态信号中，S6是恒等于0的，S5指示中断允许标志位IF的状态，然后其他的引脚是满足上面的情况
2. 控制信号组
	- **ALE (Pin 25):** **地址锁存允许**。
		- 高电平有效，当高电平时，引脚上传输的就是地址信号
	- **$\overline{RD}$ (Pin 32) & $\overline{WR}$ (Pin 29):** **读/写控制**。
	- **IO/$\overline{M}$ (Pin 28):** **IO 或 存储器选择**。
		- IO/$\overline{M}$ 低电平选择的就是访问存储器，否则就是访问IO
	- **$\overline{DEN}$ & DT/$\overline{R}$ (Pin 26, 27):** **数据收发控制**。
		- $\overline{DEN}$低电平有效，信号有效的时候，表示数据总线上具有有效数据
		- **DT**/$\overline{R}$ 表示的是确定传递数据传送的方向。 高电平的时候，CPU向I/O端口传递数据，低电平的时候，CPU就向I/O端口读取数据
3. 中断与系统支持组
	- **NMI (Pin 17) & INTR (Pin 18):** **不可屏蔽中断 & 可屏蔽中断**。
		- NMI 上升沿触发，NMI 在这个中断请求信号中不能被软件屏蔽，CPU在这个指令结束后就进入中断过程
		- INTR 可屏蔽的中断请求信号，高电平有效。CPU在每条指令的最后一个周期采样该信号，来决定是否进入中断响应周期，这个引脚上的终端请求信号可以用软件屏蔽。
	- **RESET (Pin 21):** **复位**
		![[复位CPU.png]]高电平有效，该信号需要至少4个始终周期内保持有效。复位后的状态如上所示
	- **READY (Pin 22):** **就绪信号**。
4. 模式与电源组
	- **MN/$\overline{MX}$ (Pin 33):** **最小/最大模式选择**。
	- **VCC (Pin 40) & GND (Pin 1, 20):** **供电与地线**。
5. 其他引脚
	- **HOLD: 总线保持请求信号输入**
	- **HLDA: 总线保持响应信号输出**
		- 当CPU接收到有效的HOLD信号之后，会做出一方面对CPU所有的三态输出的地址信号，数据信号，和相应的控制信号变成高阻状态，同时输出一个有效的HLDA，表示处理器现在放弃了对总线控制，当CPU检测到HOLD信号变低之后，就立即让HLDA变低，同时恢复对总线的控制。
	- **$\overline{SS0}$： 系统状态信号输出
	- $\overline{TEST}$：**测试信号上输入引脚**
		- 当CPU执行WAIT的指令时，每隔5个周期时钟周期就会对引脚进行一次测试，若为高电平，CPU就处于空转状态进行等待，当该引脚变为低电平的时候，CPU就结束等待状态，继续执行下一个指令


## 8088/8086 内部寄存器（全部要记住熟悉）

1. 通用寄存器
	1. 数据寄存器
		AX: （Accumulator）累加器，用于存放算数逻辑运算中的操作数，另外所有的I/O指令都是用累加器与外设接口传递信息
			accumulator. More for the storage of intermediate computing results. All I/O instruction must be transmitted through the AX and interface information ；
		BX: (Base) 基址寄存器， 常用来存放访问内存时的基址地址
			The base register. In indirect addressing for storage base address ；
		CX:（Count）计数寄存器，在循环和传操作自治领中用作计数器。
			Countregister. Used to store the number of cycles or the number of repetitions in a loop or string operation instruction ；
		DX: （Data） 数据寄存器，在寄存器间接寻址的I/O指令中存放I/O端口的地址。另外在做双子长乘除运算的时候，DX与AX合并存放一个双子常数（32）位，其中DX存放高16位，AX放低16位。
			Used to hold I/O port addresses or the high 16 bits of a 32-bit product/dividend in math operations.
	2. 地址指针寄存器
		SP（Stack Pointer）堆栈指针寄存器，他在堆栈操作中用来存放栈顶偏移地址，永远指向堆栈的栈顶
			Always points to the current "top" offset of the stack.
		BP (Base Pointer) 基址指针寄存器，一般用来存放内存时的基地址，通常和SS寄存器配对使用（比较： BX通常和DS寄存器配对使用）
			Used to access data within the stack segment, typically paired with the SS register.
	3. 变址寄存器
		SI（Source Index）成为源编址寄存器，DI（Destination Index）称为目的编址寄存器，他们常常在变址寻址方式中作为索引指针。
			SI：Points to the source data in string operations or acts as an index for memory addressing.
			DI：Points to the destination for string operations or acts as an index for memory addressing.
2. 段寄存器
	1. CS (代码寄存器) Points to the segment containing the current program instructions.
	2. SS (堆栈寄存器)  Points to the segment reserved for stack operations.
	3. DS(数据寄存器) Points to the primary segment where program data is stored.
	4. ES(附加数据段寄存器) Points to an additional data segment, frequently used for destination memory in string operations.
3. 控制寄存器
	1. IP 指令指针寄存器
		用来存放指令的偏移地址，CPU取指令以CS为段基址，IP为段内偏移地址。当CPU从CS段中偏移地址的内存单元取出指令代码的一个字节后，IP自动加一，只想指令代码的下一个字节。
		Contains the offset of the next instruction to be fetched; it works with CS to form the physical address ($CS:IP$). Users cannot access IP directly.
	2. FLAGS 称为标志寄存器或者状态字。他是一个16位寄存器，
		**FLAGS (Program Status Word):** A 16-bit register where 9 bits are used to indicate the CPU status or control operations:
		- **Status Flags (6 bits):** **CF** (Carry), **PF** (Parity), **AF** (Auxiliary Carry), **ZF** (Zero), **SF** (Sign), and **OF** (Overflow). These record features of the last arithmetic/logic result.
		- **Control Flags (3 bits):** **TF** (Trap/Single-step for debugging), **IF** (Interrupt Enable), and **DF** (Direction for string processing).	
		![[PPT_FLAG.png]]



## 标志位
1. CF（Carry）:  进位标志位，当进行加减法的时候，如果最高位要向前进行进位，CF则为1
2. PF (Parity)：奇偶标志位，当运算结果的低8位中1的个数为偶数时PF = 1, 当奇数的时候PF = 0
3. AF (Auxiliary):  辅助标志位， 在加减法操作中D3向D4进位发生时AF = 1， 否则AF = 0。
4. ZF (Zero)：零标志位， 当运算结果为0时，ZF = 1，否则时0
5. SF (Sign):  符号标志位， 当运算结果的最高位是1时，SF = 1，否则SF = 0
6. OF (Overflow)：溢出标志位，当运算结果的结果超出了带符号数的范围，即溢出时，OF = 1，否则OF = 0
CF和AF之间的区别：
CF处理的是最高位的，AF是监视低半字节（4个bit）
![[Gemini_CF.png]]
![[Gemini_AF.png]]

## 物理地址和逻辑地址

物理地址 = 段基址（也叫做逻辑地址）* 16 + 偏移地址


## 8088/8086工作时序

时钟周期 < 总线周期 < 指令周期
一个总线周期是4个时钟周期，在是先地址进行输出，然后再到状态或者数据进行输出，下面是分别8088的读的总线周期以及写的总线周期
![[读_时钟周期.png]]
![[写_时钟周期.png]]
读机制：
	CPU在T4开始时刻读入总线上的数据
写机制：
	写周期，CPU从T2将数据送到总线上，然后维持到T4

如果内存接口的速度比较慢，，那么可以通过在8284中产生一个低电平的信号送到8088READY端口，==8088CPU在每个总线周期的T3都会检查READY的状态==。如果此时READY是低电平，那么CPU就不执行T4，==而是现在T3中插入一个等待的时钟周期Tw==, 来等待存储器或者IO接口来完成读写操作。在Tw的开始时刻，CPU还要检查READY状态，如果仍然是低电平，那么就再插入一个Tw, 直到进入到某个Tw开始时，READY已经变成了高电平，这是，下一个时钟周期就是总线周期的最后一个始终周期T4， 由此可见，**我们可以利用READY信号，CPU可以插入若干个Tw, 使总线周期延长，达到可靠读写内存和IO接口的目的。**

